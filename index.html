<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Housekeeper</title>
</head>
<body>
<div>Please open the console to start the test</div>
<!-- <script src="https://unpkg.com/npm-housekeeper@latest/dist/housekeeper.umd.js"></script> -->
<script src="http://127.0.0.1:8085/dist/housekeeper.umd.js"></script>
<script>
  console.time('install');
  Housekeeper.install({
    pkgJson: {
      dependencies: {
        'create-react-app': "*",
        '@arco-design/web-react': '*',
        'vue': '^2.7.12'
      },
      workspace: {
        p1: {
          dependencies: {
            'vue': '*',
          },
        },
        p2: {
          dependencies: {
            'vue': '^2.7.13',
            'react': '*',
          },
        },
      },
    },
    // lockData: localStorage.getItem('lockData'),
  }).then(apis => {
    window.apis = apis;
    const lockData = apis.lockfile.output();
    console.timeEnd('install')
    localStorage.setItem('lockData', JSON.stringify(lockData, null, 2));
    
    console.log(apis.node);
    console.log(lockData);
    console.log(apis.manager.packages.vue);
    console.log(Object.keys(apis.manager.packages));
  })
</script>
<script src="./data/c.js"></script>
<script src="./data/n.js"></script>
<script>
  for (const k of n) {
    if (!c.includes(k)) {
      console.log('cache no', k);
    }
  }
</script>
</body>
</html>
